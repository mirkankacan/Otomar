@{
    ViewData["Title"] = "Ana Sayfa";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["MetaDescription"] = "OTOMAR Yedek Parça - Oto yedek parça e-ticaret sitesi. Orijinal ve yan sanayi araç yedek parçaları en uygun fiyatlarla kapınıza kadar. Hızlı kargo, güvenli ödeme.";
    ViewData["CanonicalUrl"] = "https://otomar.com.tr/ana-sayfa";
}
@section Seo{
    <!-- LocalBusiness JSON-LD -->
    <script type="application/ld+json">
    {
        "@@context": "https://schema.org",
        "@@type": "AutoPartsStore",
        "name": "OTOMAR Yedek Parça",
        "url": "https://otomar.com.tr",
        "logo": "https://otomar.com.tr/assets/img/logo/otomarlogoclean.webp",
        "image": "https://otomar.com.tr/assets/img/logo/otomarlogoclean.webp",
        "description": "Oto yedek parça e-ticaret sitesi. Orijinal ve yan sanayi araç yedek parçaları en uygun fiyatlarla.",
        "address": {
            "@@type": "PostalAddress",
            "addressLocality": "İzmir",
            "addressRegion": "İzmir",
            "addressCountry": "TR"
        },
        "geo": {
            "@@type": "GeoCoordinates",
            "latitude": 38.4192,
            "longitude": 27.1287
        },
        "priceRange": "₺₺",
        "currenciesAccepted": "TRY",
        "paymentAccepted": "Kredi Kartı, Banka Kartı",
        "areaServed": {
            "@@type": "Country",
            "name": "Türkiye"
        },
        "sameAs": []
    }
    </script>
}

<!-- Start slider section -->
<section class="hero__slider--section">
    <div class="hero__slider--inner hero__slider--activation swiper">
        <div class="hero__slider--wrapper swiper-wrapper">
            <!-- Slider 1 - Kampanya Odaklı -->
            <div class="swiper-slide ">
                <div class="hero__slider--items style4 slider4__items--bg1">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-7 col-md-7">
                                <div class="slider__content style4">
                                    <span class="slider__subtitle style4">
                                        @(DateTime.Now.Month >= 12 || DateTime.Now.Month <= 2 ? "Kış" : "Yaz") Sezonuna
                                        Özel Fırsatlar!
                                    </span>
                                    <h2 class="slider__maintitle style4 h1">Yedek Parçada <span
                                            class="text__secondary">%50'ye Varan İNDİRİM</span></h2>
                                    <p class="slider__desc style4">Aracınızın ihtiyacı olan tüm parçalar stoklarımızda!
                                        Orijinal ve yan sanayi ürünlerde muhteşem indirimler. Kışa hazırlığınızı en
                                        uygun fiyatlarla tamamlayın.</p>
                                    <a class="primary__btn slider__btn" href="/magaza">
                                        İndirimleri Keşfet
                                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M11.8335 3.6178L8.26381 0.157332C8.21395 0.107774 8.1532 0.0681771 8.08544 0.0410843C8.01768 0.0139915 7.94441 0 7.87032 0C7.79624 0 7.72297 0.0139915 7.65521 0.0410843C7.58745 0.0681771 7.5267 0.107774 7.47684 0.157332C7.37199 0.262044 7.31393 0.39827 7.31393 0.539537C7.31393 0.680805 7.37199 0.817024 7.47684 0.921736L10.0943 3.45837H0.55625C0.405122 3.46829 0.26375 3.52959 0.160556 3.62994C0.057363 3.73029 0 3.86225 0 3.99929C0 4.13633 0.057363 4.26829 0.160556 4.36864C0.26375 4.46899 0.405122 4.53029 0.55625 4.54021H10.0927L7.47527 7.07826C7.37042 7.18298 7.31235 7.3192 7.31235 7.46047C7.31235 7.60174 7.37042 7.73796 7.47527 7.84267C7.52513 7.89223 7.58588 7.93182 7.65364 7.95892C7.7214 7.98601 7.79467 8 7.86875 8C7.94284 8 8.0161 7.98601 8.08386 7.95892C8.15162 7.93182 8.21238 7.89223 8.26223 7.84267L11.8335 4.38932C11.9406 4.28419 12 4.14649 12 4.00356C12 3.86063 11.9406 3.72293 11.8335 3.6178V3.6178Z"
                                                fill="currentColor" />
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="hero__slider--layer__style4">
                        <img class="slider__layer--img " src="/assets/img/banner/home-banner4.webp" alt="slider-img">
                    </div>
                </div>
            </div>

            <!-- Slider 2 - Hızlı Destek Odaklı -->
            <div class="swiper-slide ">
                <div class="hero__slider--items style4 slider4__items--bg1">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-7 col-md-7">
                                <div class="slider__content style4">
                                    <span class="slider__subtitle style4">7/24 MÜŞTERİ DESTEĞİ - Profesyonel
                                        EKİP!</span>
                                    <h2 class="slider__maintitle style4 h1">Uzman Destek <span
                                            class="text__secondary">Her Zaman Yanınızda</span></h2>
                                    <p class="slider__desc style4">Pazartesi - Cumartesi mesai saatleri arasında
                                        kesintisiz destek hizmetimizle doğru parçayı bulmak artık çok kolay! Binlerce
                                        ürün arasından size en uygun olanı bulmanıza yardımcı oluyoruz.</p>
                                    <a class="primary__btn slider__btn" href="/iletisim">
                                        Hemen İletişime Geç
                                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M11.8335 3.6178L8.26381 0.157332C8.21395 0.107774 8.1532 0.0681771 8.08544 0.0410843C8.01768 0.0139915 7.94441 0 7.87032 0C7.79624 0 7.72297 0.0139915 7.65521 0.0410843C8.58745 0.0681771 7.5267 0.107774 7.47684 0.157332C7.37199 0.262044 7.31393 0.39827 7.31393 0.539537C7.31393 0.680805 7.37199 0.817024 7.47684 0.921736L10.0943 3.45837H0.55625C0.405122 3.46829 0.26375 3.52959 0.160556 3.62994C0.057363 3.73029 0 3.86225 0 3.99929C0 4.13633 0.057363 4.26829 0.160556 4.36864C0.26375 4.46899 0.405122 4.53029 0.55625 4.54021H10.0927L7.47527 7.07826C7.37042 7.18298 7.31235 7.3192 7.31235 7.46047C7.31235 7.60174 7.37042 7.73796 7.47527 7.84267C7.52513 7.89223 7.58588 7.93182 7.65364 7.95892C7.7214 7.98601 7.79467 8 7.86875 8C7.94284 8 8.0161 7.98601 8.08386 7.95892C8.15162 7.93182 8.21238 7.89223 8.26223 7.84267L11.8335 4.38932C11.9406 4.28419 12 4.14649 12 4.00356C12 3.86063 11.9406 3.72293 11.8335 3.6178V3.6178Z"
                                                fill="currentColor" />
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="hero__slider--layer__style4 style__right">
                        <img class="slider__layer--img " src="/assets/img/banner/home-banner5.webp" alt="slider-img">
                    </div>
                </div>
            </div>

            <!-- Slider 3 - Güvenli Ödeme & Gün İçi Teslimat -->
            <div class="swiper-slide ">
                <div class="hero__slider--items style4 slider4__items--bg1">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-7 col-md-7">
                                <div class="slider__content style4">
                                    <span class="slider__subtitle style4">İzmir İÇİ Aynı Gün TESLİMAT!</span>
                                    <h2 class="slider__maintitle style4 h1">Hızlı TESLİMAT <span
                                            class="text__secondary">GÜVENLİ Ödeme</span></h2>
                                    <p class="slider__desc style4">İzmir içi siparişleriniz aynı gün kapınızda! Güvenli
                                        ödeme garantisi ile kartınızla güvenle alışveriş yapın. Tüm ödeme yöntemlerini
                                        kabul ediyoruz, hızlı ve kolay teslimat.</p>
                                    <a class="primary__btn slider__btn" href="/magaza">
                                        Alışverişe Başla
                                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M11.8335 3.6178L8.26381 0.157332C8.21395 0.107774 8.1532 0.0681771 8.08544 0.0410843C8.01768 0.0139915 7.94441 0 7.87032 0C7.79624 0 7.72297 0.0139915 7.65521 0.0410843C7.58745 0.0681771 7.5267 0.107774 7.47684 0.157332C7.37199 0.262044 7.31393 0.39827 7.31393 0.539537C7.31393 0.680805 7.37199 0.817024 7.47684 0.921736L10.0943 3.45837H0.55625C0.405122 3.46829 0.26375 3.52959 0.160556 3.62994C0.057363 3.73029 0 3.86225 0 3.99929C0 4.13633 0.057363 4.26829 0.160556 4.36864C0.26375 4.46899 0.405122 4.53029 0.55625 4.54021H10.0927L7.47527 7.07826C7.37042 7.18298 7.31235 7.3192 7.31235 7.46047C7.31235 7.60174 7.37042 7.73796 7.47527 7.84267C7.52513 7.89223 7.58588 7.93182 7.65364 7.95892C7.7214 7.98601 7.79467 8 7.86875 8C7.94284 8 8.0161 7.98601 8.08386 7.95892C8.15162 7.93182 8.21238 7.89223 8.26223 7.84267L11.8335 4.38932C11.9406 4.28419 12 4.14649 12 4.00356C12 3.86063 11.9406 3.72293 11.8335 3.6178V3.6178Z"
                                                fill="currentColor" />
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="hero__slider--layer__style4 style__right">
                        <img class="slider__layer--img " src="/assets/img/banner/home-banner3.webp" alt="slider-img">
                    </div>
                </div>
            </div>
        </div>
        <div class="slider__pagination swiper-pagination"></div>
    </div>
</section>
<!-- End slider section -->
<!-- Start categories section -->
<section class="categories__section section--padding">
    <div class="container">
        <div class="row mb--n25" id="categories-container">
        </div>
    </div>
</section>
<!-- End categories section -->
<!-- Start product section -->
<section class="product__section section--padding  pt-0">
    <div class="container">
        <div class="section__heading section__heading--flex border-bottom d-flex justify-content-between mb-30">
            <h2 class="section__heading--maintitle"><span>ÜRÜNLERİ</span> Keşfet</h2>
            <ul class="nav tab__btn--wrapper" role="tablist">
                <li class="tab__btn--item" role="presentation">
                    <button class="tab__btn--link active" data-bs-toggle="tab" data-bs-target="#recommended"
                        type="button" role="tab" aria-selected="true">
                        ÖNERİLEN Sıralama
                    </button>
                </li>
                <li class="tab__btn--item" role="presentation">
                    <button class="tab__btn--link" data-bs-toggle="tab" data-bs-target="#bestseller" type="button"
                        role="tab" aria-selected="false">
                        En Çok Satan
                    </button>
                </li>
                <li class="tab__btn--item" role="presentation">
                    <button class="tab__btn--link" data-bs-toggle="tab" data-bs-target="#latest" type="button"
                        role="tab" aria-selected="false">
                        En YENİLER
                    </button>
                </li>
                <li class="tab__btn--item" role="presentation">
                    <button class="tab__btn--link" data-bs-toggle="tab" data-bs-target="#lowestprice" type="button"
                        role="tab" aria-selected="false">
                        En Düşük FİYAT
                    </button>
                </li>
                <li class="tab__btn--item" role="presentation">
                    <button class="tab__btn--link" data-bs-toggle="tab" data-bs-target="#highestprice" type="button"
                        role="tab" aria-selected="false">
                        En Yüksek FİYAT
                    </button>
                </li>
            </ul>
        </div>
        <div class="product__section--inner">
            <div class="tab-content" id="nav-tabContent">
                <div id="recommended" class="tab-pane fade show active" role="tabpanel">
                    <div class="product__wrapper">
                        <div class="row mb--n30" id="products-recommended">
                            <!-- Önerilen ürünler buraya dinamik olarak yüklenecek -->
                        </div>
                    </div>
                </div>
                <div id="bestseller" class="tab-pane fade" role="tabpanel">
                    <div class="product__wrapper">
                        <div class="row mb--n30" id="products-bestseller">
                            <!-- En çok satan ürünler buraya dinamik olarak yüklenecek -->
                        </div>
                    </div>
                </div>
                <div id="latest" class="tab-pane fade" role="tabpanel">
                    <div class="product__wrapper">
                        <div class="row mb--n30" id="products-latest">
                            <!-- En yeni ürünler buraya dinamik olarak yüklenecek -->
                        </div>
                    </div>
                </div>
                <div id="lowestprice" class="tab-pane fade" role="tabpanel">
                    <div class="product__wrapper">
                        <div class="row mb--n30" id="products-lowestprice">
                            <!-- En düşük fiyatlı ürünler buraya dinamik olarak yüklenecek -->
                        </div>
                    </div>
                </div>
                <div id="highestprice" class="tab-pane fade" role="tabpanel">
                    <div class="product__wrapper">
                        <div class="row mb--n30" id="products-highestprice">
                            <!-- En yüksek fiyatlı ürünler buraya dinamik olarak yüklenecek -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End product section -->

@section Scripts {
    <script>
        $(document).ready(async function () {
            // Global SkeletonLoader kullanarak skeleton göster
            SkeletonLoader.showCategorySkeleton('categories-container', 6);
            SkeletonLoader.showMultipleProductSkeletons(
                ['products-recommended', 'products-bestseller', 'products-latest', 'products-lowestprice', 'products-highestprice'],
                8
            );

            // Verileri yükle
            await loadFeaturedCategories();
            await loadFeaturedProducts();
        });

        async function loadFeaturedCategories() {
            const container = document.getElementById('categories-container');

            try {
                // API'den öne çıkan kategorileri çek
                const response = await makeRequest('/kategori/one-cikarilanlar', 'GET');

                // Response formatını kontrol et - direkt array olarak geliyor
                let categories = null;
                if (Array.isArray(response)) {
                    categories = response;
                } else if (response && response.data && Array.isArray(response.data)) {
                    categories = response.data;
                }

                // Hata kontrolü
                if (!categories || !Array.isArray(categories)) {
                    SkeletonLoader.showError('categories-container', 'Kategoriler yüklenemedi.');
                    return;
                }

                // Eğer kategori yoksa
                if (categories.length === 0) {
                    SkeletonLoader.showEmpty('categories-container', 'Henüz öne çıkan kategori bulunmamaktadır.');
                    return;
                }

                // Container'ı temizle (skeleton'ları kaldır)
                container.innerHTML = '';

                // Her kategori için kart oluştur
                categories.forEach(category => {
                    const categoryCard = createCategoryCard(category);
                    container.appendChild(categoryCard);
                });

            } catch (error) {
                console.error('Kategoriler yüklenirken hata oluştu:', error);

                // Hata mesajı göster
                SkeletonLoader.showError('categories-container', 'Kategoriler yüklenirken bir hata oluştu. Lütfen sayfayı yenileyin.');
            }
        }

        function createCategoryCard(category) {
            // Col div oluştur
            const colDiv = document.createElement('div');
            colDiv.className = 'col-lg-2 col-md-4 col-sm-4 col-6 mb-25';

            // Card div oluştur
            const cardDiv = document.createElement('div');
            cardDiv.className = 'categories__card text-center';
            // Tüm kartların aynı yükseklikte olması için
            cardDiv.style.height = '100%';
            cardDiv.style.display = 'flex';
            cardDiv.style.flexDirection = 'column';

            // Link oluştur
            const link = document.createElement('a');
            link.className = 'categories__card--link';
            const slugCategory = generateSlug(category.kategorI_ADI);
            link.href = '/magaza/kategori/' + slugCategory;
            link.style.display = 'flex';
            link.style.flexDirection = 'column';
            link.style.alignItems = 'center';
            link.style.justifyContent = 'space-between';
            link.style.textAlign = 'center';
            link.style.height = '100%';
            link.style.minHeight = '180px'; // Minimum yükseklik

            // Icon span oluştur
            const iconSpan = document.createElement('span');
            iconSpan.className = 'categories__icon';
            iconSpan.style.display = 'flex';
            iconSpan.style.justifyContent = 'center';
            iconSpan.style.alignItems = 'center';

            // Icon içeriğini ekle (resim path olarak geliyor)
            const iconPath = category.ikon || category.IKON;
            if (iconPath) {
                // Eğer SVG içeriyorsa direkt ekle, değilse img tag olarak ekle
                if (iconPath.trim().startsWith('<svg') || iconPath.trim().startsWith('<SVG')) {
                    iconSpan.innerHTML = iconPath;
                } else {
                    // Resim path'i olarak img tag oluştur
                    const img = document.createElement('img');
                    img.loading = 'lazy'; // Lazy loading
                    img.src = iconPath.startsWith('/') ? iconPath : '/' + iconPath;
                    img.alt = category.kategorI_ADI || category.KATEGORI_ADI || 'Kategori';
                    img.style.width = '50px';
                    img.style.height = '50px';
                    img.style.objectFit = 'contain';
                    img.style.display = 'block';
                    img.style.margin = '0 auto';
                    iconSpan.appendChild(img);
                }
            } else {
                // Varsayılan SVG icon
                iconSpan.innerHTML = `
                                                                        <svg width="36" height="47" viewBox="0 0 36 47" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                            <path d="M19.2306 18.4436V1.54826H29.5883L29.5878 0H6.86128V1.54826H17.219V18.4565C12.9606 18.6703 8.9929 20.0458 5.94709 22.391C2.62389 24.9489 0.793964 28.3492 0.794922 31.9656C0.794922 32.3929 1.24528 32.7396 1.80038 32.7396H10.8977C11.392 35.5153 14.4851 37.6633 18.2254 37.6633C21.9657 37.6633 25.0584 35.5153 25.5532 32.7396H34.9775C35.5326 32.7396 35.9829 32.3929 35.9829 31.9656C35.9829 29.3595 35.0186 26.8292 33.1947 24.6474C30.0894 20.9339 24.9149 18.651 19.2305 18.444L19.2306 18.4436ZM18.2246 36.1139C15.5959 36.1139 13.4035 34.6574 12.9294 32.7384H23.5205C23.0458 34.6578 20.8534 36.1139 18.2247 36.1139H18.2246ZM24.6493 31.1902C24.6404 31.1902 24.6325 31.188 24.6231 31.188C24.6138 31.188 24.6058 31.1902 24.5969 31.1902H11.8515C11.8426 31.1902 11.8346 31.188 11.8253 31.188C11.8159 31.188 11.808 31.1902 11.7991 31.1902H2.83695C3.07639 28.2787 4.66412 25.5664 7.36861 23.4839C10.3121 21.2178 14.2245 19.9702 18.3853 19.9702C23.7124 19.9702 28.6167 22.0314 31.5031 25.4839C32.937 27.1988 33.7703 29.157 33.9396 31.1905L24.6493 31.1902Z" fill="currentColor" />
                                                                            <path d="M18.3848 21.5085V23.0568C22.3426 23.0568 25.987 24.5888 28.1331 27.1544C28.648 27.7707 29.0624 28.4341 29.364 29.1266L31.2716 28.6349C30.9171 27.8207 30.4303 27.041 29.8247 26.3167C27.3063 23.3059 23.0296 21.5086 18.3848 21.5086V21.5085Z" fill="currentColor" />
                                                                            <path d="M17.2188 43.8998V46.4452H19.2302V39.9722H17.2188V43.8998Z" fill="currentColor" />
                                                                            <path d="M5.53544 42.7204L4.11328 41.6257L10.0914 37.0242L11.5136 38.1189L5.53544 42.7204Z" fill="currentColor" />
                                                                            <path d="M30.9098 42.7204L24.9316 38.1189L26.3538 37.0242L32.3319 41.6257L30.9098 42.7204Z" fill="currentColor" />
                                                                        </svg>
                                                                    `;
            }

            // Başlık oluştur
            const title = document.createElement('h2');
            title.className = 'categories__title';
            title.textContent = category.kategorI_ADI || category.KATEGORI_ADI || 'Kategori';
            title.style.textAlign = 'center';
            title.style.width = '100%';
            title.style.flex = '1'; // Kalan alanı doldur
            title.style.display = 'flex';
            title.style.alignItems = 'center';
            title.style.justifyContent = 'center';
            title.style.minHeight = '48px'; // Minimum yükseklik (2 satır için)

            // Alt başlık oluştur (ürün sayısı)
            const subtitle = document.createElement('span');
            subtitle.className = 'categories__subtitle';
            const productCount = category.toplaM_URUN_SAYISI || category.TOPLAM_URUN_SAYISI || '0';
            subtitle.textContent = `(${productCount} ürün)`;
            subtitle.style.textAlign = 'center';
            subtitle.style.width = '100%';
            subtitle.style.whiteSpace = 'nowrap';
            subtitle.style.display = 'block';
            subtitle.style.marginTop = 'auto'; // Alt kısma sabitle

            // Elementleri birleştir
            link.appendChild(iconSpan);
            link.appendChild(title);
            link.appendChild(subtitle);
            cardDiv.appendChild(link);
            colDiv.appendChild(cardDiv);

            return colDiv;
        }

        async function loadFeaturedProducts() {
            try {
                // API'den öne çıkan ürünleri çek
                const response = await makeRequest('/urun/one-cikarilanlar', 'GET');

                // Response formatını kontrol et
                let featuredProducts = null;
                if (response && typeof response === 'object') {
                    featuredProducts = response;
                } else if (response && response.data && typeof response.data === 'object') {
                    featuredProducts = response.data;
                }

                // Hata kontrolü
                if (!featuredProducts) {
                    console.error('Ürünler yüklenemedi');
                    return;
                }

                // Her kategori için ürünleri yükle
                if (featuredProducts.recommended && Array.isArray(featuredProducts.recommended)) {
                    renderProducts('products-recommended', featuredProducts.recommended);
                }
                if (featuredProducts.bestSeller && Array.isArray(featuredProducts.bestSeller)) {
                    renderProducts('products-bestseller', featuredProducts.bestSeller);
                }
                if (featuredProducts.latest && Array.isArray(featuredProducts.latest)) {
                    renderProducts('products-latest', featuredProducts.latest);
                }
                if (featuredProducts.lowestprice && Array.isArray(featuredProducts.lowestprice)) {
                    renderProducts('products-lowestprice', featuredProducts.lowestprice);
                }
                if (featuredProducts.highestPrice && Array.isArray(featuredProducts.highestPrice)) {
                    renderProducts('products-highestprice', featuredProducts.highestPrice);
                }

            } catch (error) {
                console.error('Ürünler yüklenirken hata oluştu:', error);
            }
        }

        function renderProducts(containerId, products) {
            const container = document.getElementById(containerId);
            if (!container) return;

            // Row'a flexbox ekle (tüm kolonların aynı yükseklikte olması için)
            container.style.display = 'flex';
            container.style.flexWrap = 'wrap';

            // Container'ı temizle
            container.innerHTML = '';

            // Eğer ürün yoksa
            if (!products || products.length === 0) {
                container.innerHTML = '<div class="col-12 text-center"><p class="text-muted">Henüz ürün bulunmamaktadır.</p></div>';
                return;
            }

            // Her ürün için kart oluştur
            products.forEach(product => {
                const productCard = createProductCard(product);
                container.appendChild(productCard);
            });
        }

        function createProductCard(product) {
            console.log("a")
            console.log(product)
            // Col div oluştur
            const colDiv = document.createElement('div');
            colDiv.className = 'col-lg-3 col-md-4 col-sm-6 col-6 custom-col mb-30';
            // Tüm kolonların aynı yükseklikte olması için
            colDiv.style.display = 'flex';
            colDiv.style.flexDirection = 'column';

            // Article oluştur
            const article = document.createElement('article');
            article.className = 'product__card';
            // Tüm kartların aynı yükseklikte olması için
            article.style.height = '100%';
            article.style.display = 'flex';
            article.style.flexDirection = 'column';

            // Thumbnail div
            const thumbnailDiv = document.createElement('div');
            thumbnailDiv.className = 'product__card--thumbnail';

            // Thumbnail link
            const thumbnailLink = document.createElement('a');
            thumbnailLink.className = 'product__card--thumbnail__link display-block';
            const productId = product.id;
            const productName = generateSlug(product.stoK_ADI);
            const productCode = product.stoK_KODU;
            thumbnailLink.href = `/urun/${productName}/${productCode}`;

            // Ürün resmi - DOSYA_KONUM bazen birden fazla path içerebilir (noktalı virgülle ayrılmış)
            const primaryImg = document.createElement('img');
            primaryImg.className = 'product__card--thumbnail__img product__primary--img';
            primaryImg.loading = 'lazy'; // Lazy loading
            let imagePath = product.vitriN_FOTO || product.VITRIN_FOTO;
            if (!imagePath) {
                const dosyaKonum = product.dosyA_KONUM || product.DOSYA_KONUM;
                if (dosyaKonum) {
                    // İlk resmi al (noktalı virgülle ayrılmışsa)
                    imagePath = dosyaKonum.split(';')[0].trim();
                }
            }
            if (!imagePath) {
                imagePath = 'assets/img/product/placeholder.webp';
            }
            primaryImg.src = imagePath.startsWith('/') ? imagePath : '/' + imagePath;
            primaryImg.alt = product.stoK_ADI || product.STOK_ADI || 'Ürün';

            // Secondary img (hover için - aynı resim veya ikinci resim)
            const secondaryImg = document.createElement('img');
            secondaryImg.className = 'product__card--thumbnail__img product__secondary--img';
            secondaryImg.loading = 'lazy'; // Lazy loading
            const dosyaKonum = product.dosyA_KONUM || product.DOSYA_KONUM;
            let secondaryImagePath = imagePath;
            if (dosyaKonum && dosyaKonum.includes(';')) {
                const paths = dosyaKonum.split(';');
                if (paths.length > 1) {
                    secondaryImagePath = paths[1].trim();
                }
            }
            secondaryImg.src = secondaryImagePath.startsWith('/') ? secondaryImagePath : '/' + secondaryImagePath;
            secondaryImg.alt = product.stoK_ADI || product.STOK_ADI || 'Ürün';

            thumbnailLink.appendChild(primaryImg);
            thumbnailLink.appendChild(secondaryImg);
            thumbnailDiv.appendChild(thumbnailLink);

            // Content div
            const contentDiv = document.createElement('div');
            contentDiv.className = 'product__card--content d-flex flex-column align-items-center justify-content-center text-center';
            // Flexbox ile eşit yükseklik ve space-between
            contentDiv.style.flex = '1';
            contentDiv.style.display = 'flex';
            contentDiv.style.flexDirection = 'column';
            contentDiv.style.justifyContent = 'space-between';

            // Ürün adı - esnek yükseklik
            const titleH3 = document.createElement('h3');
            titleH3.className = 'product__card--title';
            titleH3.style.flex = '1'; // Kalan alanı doldur
            titleH3.style.minHeight = '48px'; // Minimum yükseklik (2 satır için)
            titleH3.style.display = 'flex';
            titleH3.style.alignItems = 'center';
            titleH3.style.justifyContent = 'center';
            const titleLink = document.createElement('a');
            titleLink.href = `/urun/${productName}/${productCode}`;

            titleLink.textContent = product.stoK_ADI || product.STOK_ADI || 'Ürün Adı';
            titleH3.appendChild(titleLink);

            // OEM Kodu - sabit yükseklik (tek hizada)
            const oemH5 = document.createElement('h4');
            oemH5.className = 'product__card--title text-muted';
            oemH5.style.height = '24px'; // Sabit yükseklik
            oemH5.style.display = 'flex';
            oemH5.style.alignItems = 'center';
            oemH5.style.justifyContent = 'center';
            oemH5.style.margin = '8px 0';
            const oemKodu = product.oeM_KODU || product.OEM_KODU;
            oemH5.textContent = oemKodu || '';

            // Marka logosu - sabit yükseklik (tek hizada)
            const brandDiv = document.createElement('div');
            brandDiv.className = 'product__card--title';
            brandDiv.style.height = '100px'; // Sabit yükseklik
            brandDiv.style.display = 'flex';
            brandDiv.style.alignItems = 'center';
            brandDiv.style.justifyContent = 'center';
            brandDiv.style.margin = '8px 0';
            const brandImg = document.createElement('img');
            brandImg.style.width = '100px';
            brandImg.style.maxWidth = '100px';
            brandImg.style.height = 'auto';
            brandImg.style.objectFit = 'contain';
            const brandLogoPath = product.ureticI_MARKA_LOGO || product.URETICI_MARKA_LOGO;
            if (brandLogoPath) {
                brandImg.src = brandLogoPath.startsWith('/') ? brandLogoPath : '/' + brandLogoPath;
                brandImg.alt = product.ureticI_MARKA_ADI || product.URETICI_MARKA_ADI || 'Üretici marka logosu';
                brandDiv.appendChild(brandImg);
            } else {
                // Logo yoksa boş div (yükseklik korunur)
                brandDiv.style.minHeight = '100px';
            }

            // Fiyat - sabit yükseklik, en altta (tek hizada)
            const priceDiv = document.createElement('div');
            priceDiv.className = 'product__card--price';
            priceDiv.style.height = '30px'; // Sabit yükseklik
            priceDiv.style.display = 'flex';
            priceDiv.style.alignItems = 'center';
            priceDiv.style.justifyContent = 'center';
            priceDiv.style.marginTop = 'auto'; // En alta sabitle
            const priceSpan = document.createElement('span');
            priceSpan.className = 'current__price';
            const fiyat = product.satiS_FIYAT || product.SATIS_FIYAT || 0;
            // Türk Lirası formatı: binlik ayırıcı nokta, ondalık virgül
            const formattedPrice = formatTurkishLira(fiyat);
            priceSpan.textContent = formattedPrice;
            priceDiv.appendChild(priceSpan);

            // Footer - Sepete Ekle butonu
            const footerDiv = document.createElement('div');
            footerDiv.className = 'product__card--footer';
            footerDiv.style.marginTop = '8px'; // Fiyat ile arasında boşluk
            const addToCartBtn = document.createElement('a');
            addToCartBtn.className = 'product__card--btn primary__btn';
            addToCartBtn.href = '#';
            addToCartBtn.onclick = function (e) {
                e.preventDefault();
                if (typeof CartManager !== 'undefined') {
                    CartManager.addToCart(productId, 1);
                }
            };

            // SVG icon
            const svgIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svgIcon.setAttribute('width', '14');
            svgIcon.setAttribute('height', '11');
            svgIcon.setAttribute('viewBox', '0 0 14 11');
            svgIcon.setAttribute('fill', 'none');
            svgIcon.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('d', 'M13.2371 4H11.5261L8.5027 0.460938C8.29176 0.226562 7.9402 0.203125 7.70582 0.390625C7.47145 0.601562 7.44801 0.953125 7.63551 1.1875L10.0496 4H3.46364L5.8777 1.1875C6.0652 0.953125 6.04176 0.601562 5.80739 0.390625C5.57301 0.203125 5.22145 0.226562 5.01051 0.460938L1.98707 4H0.299574C0.135511 4 0.0183239 4.14062 0.0183239 4.28125V4.84375C0.0183239 5.00781 0.135511 5.125 0.299574 5.125H0.721449L1.3777 9.78906C1.44801 10.3516 1.91676 10.75 2.47926 10.75H11.0339C11.5964 10.75 12.0652 10.3516 12.1355 9.78906L12.7918 5.125H13.2371C13.3777 5.125 13.5183 5.00781 13.5183 4.84375V4.28125C13.5183 4.14062 13.3777 4 13.2371 4ZM11.0339 9.625H2.47926L1.86989 5.125H11.6433L11.0339 9.625ZM7.33082 6.4375C7.33082 6.13281 7.07301 5.875 6.76832 5.875C6.4402 5.875 6.20582 6.13281 6.20582 6.4375V8.3125C6.20582 8.64062 6.4402 8.875 6.76832 8.875C7.07301 8.875 7.33082 8.64062 7.33082 8.3125V6.4375ZM9.95582 6.4375C9.95582 6.13281 9.69801 5.875 9.39332 5.875C9.0652 5.875 8.83082 6.13281 8.83082 6.4375V8.3125C8.83082 8.64062 9.0652 8.875 9.39332 8.875C9.69801 8.875 9.95582 8.64062 9.95582 8.3125V6.4375ZM4.70582 6.4375C4.70582 6.13281 4.44801 5.875 4.14332 5.875C3.8152 5.875 3.58082 6.13281 3.58082 6.4375V8.3125C3.58082 8.64062 3.8152 8.875 4.14332 8.875C4.44801 8.875 4.70582 8.64062 4.70582 8.3125V6.4375Z');
            path.setAttribute('fill', 'currentColor');
            svgIcon.appendChild(path);
            addToCartBtn.appendChild(svgIcon);
            addToCartBtn.appendChild(document.createTextNode(' Sepete Ekle'));
            footerDiv.appendChild(addToCartBtn);

            // Elementleri birleştir
            contentDiv.appendChild(titleH3);
            contentDiv.appendChild(oemH5);
            contentDiv.appendChild(brandDiv);
            contentDiv.appendChild(priceDiv);
            contentDiv.appendChild(footerDiv);

            article.appendChild(thumbnailDiv);
            article.appendChild(contentDiv);
            colDiv.appendChild(article);

            return colDiv;
        }

    </script>
}